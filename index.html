<!DOCTYPE html>
<html>
<head>
<title>Chess TH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<style>
body { margin: 0; font-family: Arial, Helvetica, sans-serif; padding-bottom: 60px; background-color: #fafafa; }
#fixed-top-bar { position: fixed; top: 0; width: 100%; z-index: 99; }
#main-header { width: 100%; transition: padding 0.4s; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-sizing: border-box; background-color: #f1f1f1; }
#main-header h1 { font-size: 40px; font-weight: bold; margin: 10px 0; transition: font-size 0.4s; }
#main-header.shrink h1 { font-size: 24px; }
.menu-icon { cursor: pointer; }
.menu-icon div { width: 30px; height: 3px; background-color: #333; margin: 5px 0; transition: 0.4s; }
#tabs-container { position: fixed; bottom: 0; left: 0; width: 100%; display: flex; justify-content: space-around; background-color: #e9e9e9; border-top: 1px solid #ddd; z-index: 100; }
.tab-link { text-decoration: none; color: black; transition: background-color 0.3s; text-align: center; flex-grow: 1; cursor: pointer; padding: 8px 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.tab-link i { font-size: 20px; margin-bottom: 4px; }
.tab-link span { font-size: 12px; }
.tab-link:hover { background-color: #ddd; }
.tab-link.active { background-color: #ccc; font-weight: bold; }

.content { margin-top: 80px; position: relative; overflow: hidden; transition: height 0.4s ease-in-out; }
.tab-content { position: absolute; width: 100%; top: 0; left: 0; transition: transform 0.4s ease-in-out; padding: 20px; box-sizing: border-box; }
.slide-left { transform: translateX(-100%); }
.slide-right { transform: translateX(100%); }

.news-item { background-color: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.news-item h3 { margin-top: 0; }
.news-item a { text-decoration: none; color: #007bff; }
.news-item a:hover { text-decoration: underline; }
.news-item p { color: #555; }

.loader-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 0; color: #555; }
.spinner { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin-bottom: 15px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.video-container { position: relative; overflow: hidden; width: 100%; padding-top: 56.25%; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.video-container iframe { position: absolute; top: 0; left: 0; bottom: 0; right: 0; width: 100%; height: 100%; }

/* GÜNCELLENDİ: Yan menyu (sidebar) üçün stillər */
.sidebar {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 200;
    top: 0;
    right: 0;
    background-color: #fff;
    overflow-x: hidden;
    transition: 0.4s;
    padding-top: 60px;
    box-shadow: -4px 0 15px rgba(0,0,0,0.2);
    text-align: center; /* DÜZƏLİŞ: Məzmunu ortalayır */
}
.sidebar a {
    /* DÜZƏLİŞ: Padding dəyişdirildi ki, ortalama düzgün işləsin */
    padding: 15px 10px;
    text-decoration: none;
    font-size: 20px;
    color: #333;
    display: block;
    transition: 0.3s;
}
.sidebar a:hover {
    background-color: #f1f1f1;
}
.sidebar .close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 36px;
    padding: 0;
}
#overlay {
    position: fixed;
    display: none;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background-color: rgba(0,0,0,0.5);
    z-index: 150;
    transition: opacity 0.4s;
}
</style>
</head>
<body>

<div id="sidebar-menu" class="sidebar">
    <a href="javascript:void(0)" class="close-btn">&times;</a>
    <a href="#">Ayarlar</a>
    <a href="#">Haqqında</a>
    <a href="#">Açıq mənbə lisenziyası</a>
</div>
<div id="overlay"></div>


<div id="fixed-top-bar"> <div id="main-header"> <h1>Chess TH</h1> <div class="menu-icon"> <div></div><div></div><div></div> </div> </div> </div>

<div class="content">
  <div id="home-content" class="tab-content" data-index="0"> <h2>Home</h2> <p>Ana səhifə məzmunu.</p> </div>
  <div id="news-content" class="tab-content" data-index="1"> <div id="news-feed"></div> </div>
  <div id="articles-content" class="tab-content" data-index="2"> <div id="articles-feed"></div> </div>
  <div id="watch-content" class="tab-content" data-index="3"> 
    <h2>Watch Live</h2>
    <div class="video-container">
      <iframe src="https://player.twitch.tv/?channel=chess24&parent=chessth2023.github.io&muted=true" frameborder="0" allowfullscreen="true" scrolling="no"></iframe>
    </div>
    <p style="margin-top:20px; color:#555;">Chess24 kanalının canlı yayımı.</p>
  </div>
</div>

<nav id="tabs-container">
  <a class="tab-link active" onclick="openTab(0)"> <i class="fas fa-house"></i> <span>Home</span> </a>
  <a class="tab-link" onclick="openTab(1)"> <i class="fas fa-newspaper"></i> <span>News</span> </a>
  <a class="tab-link" onclick="openTab(2)"> <i class="fas fa-book-open"></i> <span>Articles</span> </a>
  <a class="tab-link" onclick="openTab(3)"> <i class="fas fa-tv"></i> <span>Watch</span> </a>
</nav>

<script>
// ---------- Başlıq kiçiltmə funksiyası ----------
window.onscroll = function() { scrollFunction() };
function scrollFunction() { const header = document.getElementById("main-header"); if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) { header.classList.add("shrink"); } else { header.classList.remove("shrink"); } }

// Yan menyu (sidebar) üçün elementlər və funksionallıq
const menuIcon = document.querySelector('.menu-icon');
const sidebar = document.getElementById('sidebar-menu');
const closeBtn = document.querySelector('.close-btn');
const overlay = document.getElementById('overlay');

menuIcon.addEventListener('click', () => { sidebar.style.width = "250px"; overlay.style.display = "block"; });
function closeNav() { sidebar.style.width = "0"; overlay.style.display = "none"; }
closeBtn.addEventListener('click', closeNav);
overlay.addEventListener('click', closeNav);


// ---------- Animasiyalı Tab Funksionallığı ----------
const tabContents = document.querySelectorAll('.tab-content');
const tabLinks = document.querySelectorAll('.tab-link');
const contentContainer = document.querySelector('.content');
let currentTabIndex = 0;
let newsLoaded = false;
let articlesLoaded = false;
const proxyUrl = 'https://api.allorigins.win/raw?url=';
const loaderHTML = `<div class="loader-container"><div class="spinner"></div><p>Yüklənir...</p></div>`;

function adjustContentHeight() { const activeContent = document.querySelector(`.tab-content[data-index="${currentTabIndex}"]`); if (activeContent) { contentContainer.style.height = `${activeContent.scrollHeight}px`; } }

function openTab(newIndex) {
  if (newIndex === currentTabIndex) return;
  const oldContent = document.querySelector(`.tab-content[data-index="${currentTabIndex}"]`);
  const newContent = document.querySelector(`.tab-content[data-index="${newIndex}"]`);
  tabLinks[currentTabIndex].classList.remove('active');
  tabLinks[newIndex].classList.add('active');
  if (newIndex > currentTabIndex) { oldContent.classList.add('slide-left'); newContent.classList.remove('slide-right'); } 
  else { oldContent.classList.add('slide-right'); newContent.classList.remove('slide-left'); }
  currentTabIndex = newIndex;
  if (newIndex === 1 && !newsLoaded) { fetchNews(); } 
  else if (newIndex === 2 && !articlesLoaded) { fetchArticles(); }
  adjustContentHeight();
}

function fetchNews() {
  if (newsLoaded) return; newsLoaded = true;
  const feedContainer = document.getElementById('news-feed');
  feedContainer.innerHTML = loaderHTML; adjustContentHeight();
  const rssUrl = 'https://www.chess.com/rss/news';
  fetch(proxyUrl + encodeURIComponent(rssUrl)).then(r => r.ok ? r.text() : Promise.reject(r.status)).then(s => new DOMParser().parseFromString(s, "text/xml")).then(d => {
    feedContainer.innerHTML = '<h2>Chess.com Xəbərləri</h2>';
    d.querySelectorAll("item").forEach(el => { const t = el.querySelector("title").textContent, l = el.querySelector("link").textContent, p = el.querySelector("description").textContent.replace(/<[^>]*>?/gm, '').substring(0, 150) + '...'; feedContainer.innerHTML += `<div class="news-item"><h3><a href="${l}" target="_blank">${t}</a></h3><p>${p}</p></div>`; });
  }).catch(e => { feedContainer.innerHTML = 'Xəbərləri yükləmək mümkün olmadı.'; console.error('News RSS Xətası:', e); }).finally(() => adjustContentHeight());
}

function fetchArticles() {
  if (articlesLoaded) return; articlesLoaded = true;
  const feedContainer = document.getElementById('articles-feed');
  feedContainer.innerHTML = loaderHTML; adjustContentHeight();
  const rssUrl = 'https://www.chess.com/rss/articles';
  fetch(proxyUrl + encodeURIComponent(rssUrl)).then(r => r.ok ? r.text() : Promise.reject(r.status)).then(s => new DOMParser().parseFromString(s, "text/xml")).then(d => {
    feedContainer.innerHTML = '<h2>Chess.com Articles</h2>';
    d.querySelectorAll("item").forEach(el => { const t = el.querySelector("title").textContent, l = el.querySelector("link").textContent, p = el.querySelector("description").textContent.replace(/<[^>]*>?/gm, '').substring(0, 150) + '...'; feedContainer.innerHTML += `<div class="news-item"><h3><a href="${l}" target="_blank">${t}</a></h3><p>${p}</p></div>`; });
  }).catch(e => { feedContainer.innerHTML = 'Məqalələri yükləmək mümkün olmadı.'; console.error('Articles RSS Xətası:', e); }).finally(() => adjustContentHeight());
}

document.addEventListener('DOMContentLoaded', function() {
  tabContents.forEach((content, index) => { if (index > 0) content.classList.add('slide-right'); });
  adjustContentHeight();
  window.addEventListener('resize', adjustContentHeight);
});
</script>

</body>
</html>